# 核心架构与流程概述

RAGFlow 基于 "深度文档理解 + 检索增强生成" 的核心架构，其交互流程可分为以下阶段：

## 文档预处理阶段
- 支持 Word/PPT/Excel/PDF/扫描件/网页等异构数据解析
- 通过 deepdoc 模块实现深度语义分析（如表格理解、图像 OCR 增强）
- 基于模板的智能分块（Template-based chunking），保留上下文关联性


> 上传文档进行切分，然后转化为向量存储
-----

> 当用户进行询问时，会进行检索，对结果数据进行优化 => 最终形成对应的上下文prompt进行LLM的询问

> 对LLM的结果进行解析、思考链的解析和展示

## 检索阶段：
- 多路召回（关键词/向量/全文检索）结合
- 融合重排序（fused re-ranking）提升结果相关性
- 支持 Elasticsearch 或 Infinity 作为存储引擎

## 生成阶段：
- 通过 LLM 整合检索结果生成回答
- 引用溯源可视化（Grounded citations）减少幻觉
- 支持自定义 prompt 模板